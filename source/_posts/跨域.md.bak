---
title: 跨域
tag: 
	- 跨域
---

## 原理

> **跨域产生原因： 浏览器js同源安全策略，协议/域名/端口不同产生跨域**
                 img、 script、link 标签没有跨域相限制 （img盗链，script加载远程cdn js文件）

## 方法

### JSONP

> 原理: 将回调方法名通过 script 传给后端，后端将数据作为参数传入回调方法名返回

```java
// b.com 后端获取回调方法名，将数据作为参数传入进行调用并返回
protected void Page_Load(object sender, EventArgs e) {
    if (this.IsPostBack == false) {
        string callback = "”;
        if (Request["callback"] != null) {
            callback = Request["callback"]; //服务器端要返回的数据
            string data = "1024”;
            Response.Write(callback + "(" + data + ")");
        }
    }
}

// a.com 回调方法名 myFn通过script传给后端
<script> function myFn ( data ) { alert( data + 'px' ); } </script>
<script type='text/javascript' src='http://b.com/data.aspx?callback=myFn'/></script>
```
