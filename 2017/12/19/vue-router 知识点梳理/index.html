<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="vue,vue-router," />










<meta name="description" content="参考: vue-router 官方文档">
<meta name="keywords" content="vue,vue-router">
<meta property="og:type" content="article">
<meta property="og:title" content="vue-router 知识点梳理">
<meta property="og:url" content="http://jhgrrewq.github.io/2017/12/19/vue-router 知识点梳理/index.html">
<meta property="og:site_name" content="jhgrrewq 前端小站">
<meta property="og:description" content="参考: vue-router 官方文档">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-03-30T11:35:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="vue-router 知识点梳理">
<meta name="twitter:description" content="参考: vue-router 官方文档">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'O0AP0FGXSX',
      apiKey: 'ab7c2224e88a925feeea82c8902add9d',
      indexName: 'jhgrrewq',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://jhgrrewq.github.io/2017/12/19/vue-router 知识点梳理/"/>





  <title>vue-router 知识点梳理 | jhgrrewq 前端小站</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">jhgrrewq 前端小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">置我于死地者 必将赐我以后生</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jhgrrewq.github.io/2017/12/19/vue-router 知识点梳理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jhgrrewq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/8380737?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jhgrrewq 前端小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">vue-router 知识点梳理</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-19T10:47:40+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <!-- markdownlint-disable MD010 -->
<blockquote>
<p>参考: <a href="https://router.vuejs.org/zh-cn/" target="_blank" rel="noopener">vue-router 官方文档</a></p>
</blockquote>
<a id="more"></a>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue-router/dist/vue-router.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 使用 router-link 组件来导航 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;router-link/&gt; 默认被渲染成 a 标签， 使用 tag 属性指定渲染的 html 标签， to 属性指定跳转链接--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;router-link/&gt; 对应的路由匹配成功会自动添加 class 属性值 .router-link-active --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/user"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 路由匹配到的组件都会渲染到这里 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0 使用模块化编程，需要引入 Vue 和 VueRouter, 调用 Vue.use(VueRouter)</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 定义（路由）组件，可以从其他文件 import</span></span><br><span class="line"><span class="keyword">const</span> User = &#123;<span class="attr">template</span>: <span class="string">'&lt;div&gt;user&lt;/div&gt;'</span>&#125;</span><br><span class="line"><span class="comment">// import User from 'components/user'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 定义路由 routes 每个路由映射一个路由组件</span></span><br><span class="line"><span class="keyword">const</span> routes = [&#123;</span><br><span class="line">	path: <span class="string">'/user'</span>,</span><br><span class="line">	component: User</span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 创建 router 实例，传入 routes 配置，当然可以传入其他配置</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4 创建和挂载根实例</span></span><br><span class="line"><span class="comment">// router 作为配置参数传入，使整个应用都具有路由功能</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">	el: <span class="string">'#app'</span>,</span><br><span class="line">	router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>VueRouter 将整个 router 实例和 route 实例(<strong>当前激活的路由信息对象，只读，但可以 watch 变化</strong>)挂载在 Vue 的构造函数原型上， 因此可通过 this.$router 和 this.$route 全局访问</p>
<p>接下来都以在 vue 中使用举例</p>
<h2 id="动态路由匹配"><a href="#动态路由匹配" class="headerlink" title="动态路由匹配"></a>动态路由匹配</h2><p>路由配置中动态路径参数以冒号 : 开头<br>同一个路径匹配多个路由时，匹配的优先级按照定义的先后顺序，最先定义的优先级最高</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	routes: [&#123;</span><br><span class="line">		path: <span class="string">'/user/:id'</span>,</span><br><span class="line">		...</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>以 vue 举例， 匹配到一个路由时， 参数会被设置到 $route.params 中；url有查询参数，参数会被设置到 $route.query 中</strong></p>
<h3 id="响应路由参数"><a href="#响应路由参数" class="headerlink" title="响应路由参数"></a>响应路由参数</h3><p>使用路由参数，如 /user/a 导航到 /user/b，<strong>原来的组件实例会被复用，因此组件的生命周期钩子不会被调用</strong></p>
<ul>
<li>watch $route 对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> User = &#123;</span><br><span class="line">	template: <span class="string">'...'</span>,</span><br><span class="line">	watch: &#123;</span><br><span class="line">		$route(to, <span class="keyword">from</span>) &#123;</span><br><span class="line">			<span class="comment">// 对路由变化做出响应</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 2.2 版本的 beforeRouteUpdate 钩子</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> User = &#123;</span><br><span class="line">	...</span><br><span class="line">	beforeRouteUpdate(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">		<span class="comment">// 对路由变化做出响应...</span></span><br><span class="line">		<span class="comment">// 最后调用 next()</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h2><p>组件可以包含嵌套的 router-view 组件，用于挂载匹配的子路由组件</p>
<p>子路由使用 children 属性配置，可以无限嵌套</p>
<p><strong>以 / 开头的嵌套路径会被当为根路径，因此子路由不用 / 开头， 当然子路由可以设 “” 来默认匹配子路由</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> User = &#123;</span><br><span class="line">	template: <span class="string">'&lt;div&gt;user&lt;/div&gt;&lt;router&gt;&lt;/router&gt;'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	routes: [&#123;</span><br><span class="line">		path: <span class="string">'/user/:id'</span>,</span><br><span class="line">		component: User,</span><br><span class="line">		children: [&#123;</span><br><span class="line">			<span class="comment">// 当 /user/:id 匹配成功， UserHome 组件会被渲染在 User 组件中的 &lt;router-view&gt; 中</span></span><br><span class="line">			<span class="comment">// 可以设置默认匹配子路由</span></span><br><span class="line">			path: <span class="string">''</span>,</span><br><span class="line">			component: UserHome</span><br><span class="line">		&#125;, &#123;</span><br><span class="line">			<span class="comment">// 当 /user/:id/profile 匹配成功， UserHome 组件会被渲染在 User 组件中的 &lt;router-view&gt; 中</span></span><br><span class="line">			path: <span class="string">'profile'</span>,</span><br><span class="line">			component: UserProfile</span><br><span class="line">		&#125;]</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h2><p>除了使用 router-link 组件创建 a 标签定义导航连接，还可以使用 router 的实例方法，通过编程代码实现</p>
<ul>
<li><strong>router.push(location, onComplete?, onAbort?)</strong></li>
</ul>
<p><strong>注意: 在 Vue 实例内部， 通过 $router 访问路由实例，可以调用 this.$router.push</strong></p>
<p>点击 router-link 组件时，该方法会在内部调用， 点击 <strong><router-link :to="..."></router-link></strong> 等同于调用 <strong>router.push(…)</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传入字符串</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(<span class="string">'/home'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入对象</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">'/home'</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 命名路由</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123; <span class="attr">name</span>: <span class="string">'user'</span>, <span class="attr">params</span>: &#123; <span class="attr">userId</span>: <span class="number">123</span> &#125; &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带查询参数 变成 /register?plan=private</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">'register'</span>, <span class="attr">query</span>: &#123; <span class="attr">plan</span>: <span class="string">'private'</span> &#125; &#125;)</span><br></pre></td></tr></table></figure>
<p>该方法会向 history 栈添加一个新的记录。该方法的参数可以是一个字符串路径，或者一个描述地址的对象。<strong>如果提供了 path，params 会被忽略，但是 query 不会被忽略。同样的规则也使用 router-link 组件的 to 属性</strong>。看下面的例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userId = <span class="number">123</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123; <span class="attr">name</span>: <span class="string">'user'</span>, <span class="attr">params</span>: &#123; userId &#125; &#125;) <span class="comment">// /user/123</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">'/user/$&#123;userId&#125;'</span> &#125;) <span class="comment">// /user/123</span></span><br><span class="line"><span class="comment">// 下面 params 不生效</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">'/user/$&#123;userId&#125;'</span>, <span class="attr">params</span>: &#123; userId &#125; &#125;) <span class="comment">// /user</span></span><br></pre></td></tr></table></figure>
<p>在 2.2.0+，在 router.push 和 router.replace 中提供了 onComplete 和 onAbort 回调作为第二个和第三个参数。这些回调会在导航成功完成（在左右异步钩子被解析之后）或终止（导航到相同路由、或在当前导航完成之前导航到另一个不同的路由）时进行相应调用。<strong>如果目的路由和当前路由相同，只是参数发生改变（如 /user/2 -&gt; /user/1），需要使用 beforeRouteUpdate 钩子来相应变化 或者 watch $route</strong></p>
<ul>
<li><strong>router.replace(location, onComplete?, onAbort?)</strong></li>
</ul>
<p>该方法和 router.push 很像，唯一不同的是它不会向 history 栈添加新纪录，只是替换当前的 history 记录</p>
<ul>
<li><strong>router.go(n)</strong></li>
</ul>
<p>该方法的参数是一个整数，即在 history 记录中前进或后退几步，类似 window.history.go(n)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在浏览器记录中前进一步，等同 history.forward() history.go(1)</span></span><br><span class="line">router.go(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在浏览器记录中后退一步，等同 history.back() history.go(-1)</span></span><br><span class="line">router.go(<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 前进3步</span></span><br><span class="line">router.go(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>router.push、 router.replace、router.go 其实仿照 window.history.pushState、window.history.replaceState 和 window.history.go</p>
<p>vue-router 的导航方法（push、replace、go）在不同路由模式下表现一致</p>
<h2 id="命名路由"><a href="#命名路由" class="headerlink" title="命名路由"></a>命名路由</h2><p>可以通过命名一个路由，方便进行链接或者跳转。可以再创建 router 实例时在 routes 配置中给某个路由命名</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	path: <span class="string">'/user/:id'</span>,</span><br><span class="line">	name: <span class="string">'user'</span>,</span><br><span class="line">	component: User</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>通过 router-link 组件 或者 router.push 方法都可以跳转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 路由都导航到 /user/123</span><br><span class="line">// 给 router-link 组件的 to 属性传递一个对象</span><br><span class="line">&lt;router-link :to=&quot;&#123; name: &apos;user&apos;, params: &#123; userId: 123 &#125;&#125;&quot;&gt;&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由都导航到 /user/123</span></span><br><span class="line">router.push(&#123; <span class="attr">name</span>: <span class="string">'user'</span>, <span class="attr">params</span>: &#123; <span class="attr">userId</span>: <span class="number">123</span> &#125; &#125;)</span><br></pre></td></tr></table></figure>
<h2 id="命名视图"><a href="#命名视图" class="headerlink" title="命名视图"></a>命名视图</h2><p>想要在同级展示多个视图，而不是嵌套展示，需要使用命名视图。<strong>如果 router-view 没有设置名字，默认是 default</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view class=&quot;view1&quot;&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;router-view class=&quot;view2&quot; name=&quot;view2&quot;&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;router-view class=&quot;view3&quot; name=&quot;view3&quot;&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>
<p>一个 router-view 组件挂载渲染一个匹配的组件， 对于同一个路由，多个视图就需要多个组件，<strong>在 router 实例的 routes 配置上 需要使用 components 而不是 component</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	routes: [&#123;</span><br><span class="line">		path: <span class="string">'/'</span>,</span><br><span class="line">		components: &#123;</span><br><span class="line">			<span class="keyword">default</span>: Foo,</span><br><span class="line">			view1: Bar,</span><br><span class="line">			view2: Baz</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="重定向和别名"><a href="#重定向和别名" class="headerlink" title="重定向和别名"></a>重定向和别名</h2><h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><p>重定向也通过配置 routes 完成</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从 /a 重定向到 /b</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	path: <span class="string">'/a'</span>,</span><br><span class="line">	redirect: <span class="string">'/b'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以重定向到一个命名路由</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	path: <span class="string">'/a'</span>,</span><br><span class="line">	redirect: &#123; <span class="attr">name</span>: <span class="string">'foo'</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 还可以是一个方法，动态返回重定向目标</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	path: <span class="string">'/a'</span>,</span><br><span class="line">	redirect: <span class="function"><span class="params">to</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// 方法接受 目标路由 作为参数</span></span><br><span class="line">		<span class="comment">// return 重定向的 字符串路径/路径对象</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>常见应用是添加默认跳转</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	path: <span class="string">'/'</span>,</span><br><span class="line">	redirect: <span class="string">'/b'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h3><p>重定向是指 访问 /a 时，URL 会被替换成 /b， 然后匹配路由 /b</p>
<p><strong>/a 的别名是 /b， 意味着访问 /b 时，URL 保持 /b， 但是匹配路由 /a, 就像访问 /a</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">'/a'</span>, <span class="attr">component</span>: A, <span class="attr">alias</span>: <span class="string">'/b'</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>看下面的案例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Home = &#123; <span class="attr">template</span>: <span class="string">'&lt;div&gt;&lt;h1&gt;Home&lt;/h1&gt;&lt;router-view&gt;&lt;/router-view&gt;&lt;/div&gt;'</span> &#125;</span><br><span class="line"><span class="keyword">const</span> Foo = &#123; <span class="attr">template</span>: <span class="string">'&lt;div&gt;foo&lt;/div&gt;'</span> &#125;</span><br><span class="line"><span class="keyword">const</span> Bar = &#123; <span class="attr">template</span>: <span class="string">'&lt;div&gt;bar&lt;/div&gt;'</span> &#125;</span><br><span class="line"><span class="keyword">const</span> Baz = &#123; <span class="attr">template</span>: <span class="string">'&lt;div&gt;baz&lt;/div&gt;'</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  base: __dirname,</span><br><span class="line">  routes: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">'/home'</span>, <span class="attr">component</span>: Home,</span><br><span class="line">      children: [</span><br><span class="line">        <span class="comment">// absolute alias</span></span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">'foo'</span>, <span class="attr">component</span>: Foo, <span class="attr">alias</span>: <span class="string">'/foo'</span> &#125;,</span><br><span class="line">        <span class="comment">// relative alias (alias to /home/bar-alias)</span></span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">'bar'</span>, <span class="attr">component</span>: Bar, <span class="attr">alias</span>: <span class="string">'bar-alias'</span> &#125;,</span><br><span class="line">        <span class="comment">// multiple aliases</span></span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">'baz'</span>, <span class="attr">component</span>: Baz, <span class="attr">alias</span>: [<span class="string">'/baz'</span>, <span class="string">'baz-alias'</span>] &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div id="app"&gt;</span></span><br><span class="line"><span class="string">      &lt;h1&gt;Route Alias&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      &lt;ul&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;&lt;router-link to="/foo"&gt;</span></span><br><span class="line"><span class="string">          /foo (renders /home/foo)</span></span><br><span class="line"><span class="string">        &lt;/router-link&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;&lt;router-link to="/home/bar-alias"&gt;</span></span><br><span class="line"><span class="string">          /home/bar-alias (renders /home/bar)</span></span><br><span class="line"><span class="string">        &lt;/router-link&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;&lt;router-link to="/baz"&gt;</span></span><br><span class="line"><span class="string">          /baz (renders /home/baz)&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;&lt;router-link to="/home/baz-alias"&gt;</span></span><br><span class="line"><span class="string">          /home/baz-alias (renders /home/baz)</span></span><br><span class="line"><span class="string">        &lt;/router-link&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;/ul&gt;</span></span><br><span class="line"><span class="string">      &lt;router-view class="view"&gt;&lt;/router-view&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="html5-history-模式"><a href="#html5-history-模式" class="headerlink" title="html5 history 模式"></a>html5 history 模式</h2><p>vue-router 默认使用 hash 模式–使用 URL 的 hash 模拟一个完整的 URL, 当 URL 改变时页面不会重新加载</p>
<p>也可以改用路由 history 模式，该模式是利用 history.pushState API 完成 URL 跳转而无须重新加载页面。访问是就像正常 URL，而不是 host#/</p>
<ul>
<li><strong>首先通过生成 router 实例传入 mode 属性</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	mode: <span class="string">'history'</span>,</span><br><span class="line">	routes: [...]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>后端配置</strong></li>
</ul>
<p>如果没有进行后端配置，在浏览器直接访问会报 404，可以再后端增加一个覆盖全部情况的候选资源: <strong>如果 URL 匹配不到任何静态资源，则应该返回同一个 index.html 页面，这个页面就是你 app 依赖的页面</strong></p>
<ul>
<li>原生 Node.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> httpPort = <span class="number">80</span></span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  fs.readFile(<span class="string">'index.htm'</span>, <span class="string">'utf-8'</span>, (err, content) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'We cannot open "index.htm" file.'</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'text/html; charset=utf-8'</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    res.end(content)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;).listen(httpPort, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Server listening on: http://localhost:%s'</span>, httpPort)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>基于 Node.js 的 express 考虑使用 connect-history-api-fallback 中间件</li>
</ul>
<p><strong>更优化的情况应该是覆盖全部的路由情况，给出一个 404 页面; 或者使用 Node.js,通过后端匹配 URL，没有匹配到路由的时候返回 404</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	mode: <span class="string">'history'</span>,</span><br><span class="line">	routes: [&#123;</span><br><span class="line">		path: <span class="string">'*'</span>,</span><br><span class="line">		component: NotFoundComponent</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="导航守卫-（导航-表示路由正在改变）"><a href="#导航守卫-（导航-表示路由正在改变）" class="headerlink" title="导航守卫 （导航 表示路由正在改变）"></a>导航守卫 （导航 表示路由正在改变）</h2><p>vue-router 提供导航守卫只要用来通过跳转或取消的方式守卫导航。可以有不同机会植入路由导航过程中: <strong>全局，单路由独享， 组件级</strong></p>
<p><strong>注意: 参数或查询的改变不会触发 进入/离开的导航守卫，可以通过 watch $route 对象，或者使用 beforeRouteUpdate 组件内守卫</strong></p>
<h3 id="全局守卫"><a href="#全局守卫" class="headerlink" title="全局守卫"></a>全局守卫</h3><ul>
<li><strong>router.beforeEach</strong></li>
</ul>
<p>属于 router 的方法，用于注册全局前置守卫</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>该方法接受三个参数：</p>
<p><strong>to: Route:</strong> 即将进入目标的 <strong>路由对象</strong></p>
<p><strong>from: Route:</strong> 当前导航正要离开的路由</p>
<p><strong>next: function:</strong> 一定要调用该方法来 resolve 这个钩子，执行效果依赖 next 方法的参数</p>
<p><strong>最后一定要调用 next() ，否则钩子不会被 resolve </strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 进入管道的下一个钩子</span></span><br><span class="line">next()</span><br><span class="line"></span><br><span class="line"><span class="comment">//中断当前导航。如果浏览器的 URL 改变了（可能使用户手动或者浏览器后退按钮），那 URL 地址会中重置到 from 路由对应的地址</span></span><br><span class="line">next(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//跳转到一个不同的地址。当前的导航被终端，然后进行一个新的导航。可通过向 next 传递任意位置对象，且允许设置诸如 replace: true、 name: 'home' 之类的选项以及任何在 router-link 的 to 属性或 router.push 中的选项</span></span><br><span class="line">next(<span class="string">'/'</span>) 或 next(&#123;<span class="attr">path</span>: <span class="string">'/'</span>&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>router.beforeResolve （2.5.0 新增）</strong></li>
</ul>
<p>注册全局解析守卫， 和 router.beforeEach 类似，区别在导航被确认之前，<strong>同时在所有组件内守卫和异步路由组件被解析之后</strong>，解析守卫就被调用</p>
<ul>
<li><strong>router.afterEach</strong></li>
</ul>
<p>注册全局后置守卫，和守卫不同，<strong>这些钩子不会接受 next 函数，也不会改变导航本身</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.afterEach(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="路由独享守卫"><a href="#路由独享守卫" class="headerlink" title="路由独享守卫"></a>路由独享守卫</h3><p>可在路由配置上直接定义 beforeEnter 守卫，这些守卫和全局前置守卫 beforeEach 的方法参数是一样的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	routes: [&#123;</span><br><span class="line">		path: <span class="string">'/foo'</span>,</span><br><span class="line">		component: Foo,</span><br><span class="line">		beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">			<span class="comment">// ...</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="组件内守卫"><a href="#组件内守卫" class="headerlink" title="组件内守卫"></a>组件内守卫</h3><ul>
<li><strong>beforeRouterEnter</strong></li>
<li><strong>beforeRouterUpdate (2.2 新增)</strong></li>
<li><strong>beforeRouterLeave</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Foo = &#123;</span><br><span class="line">	template: <span class="string">`...`</span>,</span><br><span class="line">	beforeRouteEnter(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">		<span class="comment">// 在渲染该组件的对应路由被 confirm 前调用</span></span><br><span class="line">		<span class="comment">// 不 ！能 ！获取组件实例 this</span></span><br><span class="line">		<span class="comment">// 因为当守卫执行前，组件实例还没被创建</span></span><br><span class="line">	&#125;,</span><br><span class="line">	beforeRouteUpdate(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">		<span class="comment">// 在当前路由改变， 但是该组件被复用时候调用</span></span><br><span class="line">		<span class="comment">// 举例来说，对一个带有动态参数的路径 /foo/:id， 在 /foo/2 和 /foo/1 之间跳转</span></span><br><span class="line">		<span class="comment">// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。这个钩子就是在这种情况下呗调用</span></span><br><span class="line">		<span class="comment">// 可以访问组件实例 this</span></span><br><span class="line">	&#125;,</span><br><span class="line">	beforeRouteLeave(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">		<span class="comment">// 导航离开该组件的对应路由时候调用</span></span><br><span class="line">		<span class="comment">// 可以访问组件实例 this</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>beforeRouteEnter 守卫不能访问 this, 因为守卫在导航确认前调用， 因此即将登场的新组建还没创建</strong></p>
<p>可通过传一个回调给 next 来访问组件实例。在导航被确认的时候执行回调，并且把组件实例作为回调用法的参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteEnter(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">	next(<span class="function"><span class="params">vm</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// 通过 vm 访问组件实例</span></span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>beforeRouteEnter 是支持 next 传递回调的唯一守卫。对于 beforeRouteUpdata 和 beforeRouteLeave 可以访问组件实例 this， 没有必要支持传递回调</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteLeave(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">	<span class="comment">// 只能使用 this</span></span><br><span class="line">	<span class="keyword">this</span>.name = to.params.name</span><br><span class="line">	next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>beforeRouteLeave 守卫通常用来禁止用户在还未保存修改前突然离开。<strong>导航可以通过 next(false) 取消</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteLeave(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">	<span class="keyword">const</span> answer = <span class="built_in">window</span>.confirm(<span class="string">'确定离开吗？您还有未保存的修改！'</span>)</span><br><span class="line">	<span class="keyword">if</span> (answer) &#123;</span><br><span class="line">		next()</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		next(<span class="literal">false</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="完整的导航解析流程"><a href="#完整的导航解析流程" class="headerlink" title="完整的导航解析流程"></a>完整的导航解析流程</h3><ul>
<li><strong>导航被触发</strong></li>
<li><strong>在失活的组件里调用离开守卫 beforeRouteLeave</strong></li>
<li><strong>调用全局 beforeEach 守卫</strong></li>
<li><strong>在复用的组件里调用 beforeRouteUpdate 守卫 （2.2+）</strong></li>
<li><strong>在路由配置里调用 beforeEnter</strong></li>
<li><strong>解析异步路由组件</strong></li>
<li><strong>在被激活的组件里调用 beforeRouteEnter</strong></li>
<li><strong>调用全局的 beforeResolve (2.5+)</strong></li>
<li><strong>导航被确认</strong></li>
<li><strong>调用全局的 afterEach 钩子</strong></li>
<li><strong>触发 DOM 更新</strong></li>
<li><strong>在创建后的实例调用 beforeRouteEnter 守卫中传给 next 的回调函数</strong></li>
</ul>
<h2 id="路由元信息"><a href="#路由元信息" class="headerlink" title="路由元信息"></a>路由元信息</h2><p>定义路由时候可以配置 meta 字段。routes 配置中的每个路由对象为路由记录， 路由记录可以嵌套。 一个路由匹配到的所有路由记录会暴露为 $route 对象（包括导航守卫中的路由对象）的 $route.matched 数组中。<strong>通过遍历 $route.matched 检查路由记录中的 meta 字段</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// routes 配置</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">	routes: [&#123;</span><br><span class="line">		path: <span class="string">'/foo'</span>,</span><br><span class="line">		component: Foo,</span><br><span class="line">		children: [&#123;</span><br><span class="line">			path: <span class="string">'bar'</span>,</span><br><span class="line">			component: Bar,</span><br><span class="line">			<span class="comment">// meta 字段</span></span><br><span class="line">			meta: &#123;</span><br><span class="line">				requiresAuth: <span class="literal">true</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;]</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局守卫中检查</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> (to.matched.some(<span class="function"><span class="params">record</span> =&gt;</span> record.meta.requiresAuth)) &#123;</span><br><span class="line">		<span class="comment">// 该 route 需要 require auth，判断是否登录，没有登录则重定向到登录页面</span></span><br><span class="line">		<span class="keyword">if</span> (!auth.loggedIn()) &#123;</span><br><span class="line">			next(&#123;</span><br><span class="line">				path: <span class="string">'/login'</span>,</span><br><span class="line">				query: &#123;</span><br><span class="line">					redirect: to.fullPath</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			next()</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		next() <span class="comment">// 确保一定调用 next()</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="过渡动效"><a href="#过渡动效" class="headerlink" title="过渡动效"></a>过渡动效</h2><h3 id="所有路由过渡"><a href="#所有路由过渡" class="headerlink" title="所有路由过渡"></a>所有路由过渡</h3><p>可以直接给 router-view 组件添加过渡</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="单个路由的过渡"><a href="#单个路由的过渡" class="headerlink" title="单个路由的过渡"></a>单个路由的过渡</h3><p>每个路由组件有自己的过渡效果，可在各路由组件内使用 transition 组件并设置不同的 name</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Foo= &#123;</span><br><span class="line">	template: <span class="string">`</span></span><br><span class="line"><span class="string">		&lt;transition name="slide"&gt;</span></span><br><span class="line"><span class="string">			&lt;div class="foo"&gt;...&lt;/div&gt;</span></span><br><span class="line"><span class="string">		&lt;/transition&gt;</span></span><br><span class="line"><span class="string">	`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="基于路由的动态过渡"><a href="#基于路由的动态过渡" class="headerlink" title="基于路由的动态过渡"></a>基于路由的动态过渡</h3><p>还可以基于当前路由和目标路由的变化关系，动态设置过渡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 使用动态 transition name</span><br><span class="line">&lt;transition :name=&quot;transitionName&quot;&gt;</span><br><span class="line">	&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/transition&gt;</span><br><span class="line"></span><br><span class="line">// 在父组件中 watch $route 决定使用哪种过渡</span><br><span class="line">watch: &#123;</span><br><span class="line">	&apos;$route&apos; (to, from) &#123;</span><br><span class="line">		const toDepth = to.path.split(&apos;/&apos;).length</span><br><span class="line">		const fromDepth = from.path.split(&apos;/&apos;).length</span><br><span class="line">		this.transitionName = toDepth &lt; fromDepth ? &apos;slide-right&apos; : &apos;slide-left&apos;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数据获取"><a href="#数据获取" class="headerlink" title="数据获取"></a>数据获取</h2><p>通常有两种形式从服务器获取用户数据</p>
<ul>
<li><p><strong>导航完成之后获取:</strong> 先完成导航，然后在接下来的组件生命周期钩子中获取数据，在数据获取期间显示“加载”中之类的提示 <strong>常用这种形式</strong></p>
</li>
<li><p><strong>导航完成之前获取:</strong> 导航完成前，在路由进入的守卫中获取数据，在数据获取成功后执行导航</p>
</li>
</ul>
<h3 id="导航完成后获取数据"><a href="#导航完成后获取数据" class="headerlink" title="导航完成后获取数据"></a>导航完成后获取数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;post&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;loading&quot; v-if=&quot;loading&quot;&gt;</span><br><span class="line">      Loading...</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div v-if=&quot;error&quot; class=&quot;error&quot;&gt;</span><br><span class="line">      &#123;&#123; error &#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div v-if=&quot;post&quot; class=&quot;content&quot;&gt;</span><br><span class="line">      &lt;h2&gt;&#123;&#123; post.title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; post.body &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      loading: false,</span><br><span class="line">      post: null,</span><br><span class="line">      error: null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    // 组件创建完后获取数据，</span><br><span class="line">    // 此时 data 已经被 observed 了</span><br><span class="line">    this.fetchData()</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    // 如果路由有变化，会再次执行该方法</span><br><span class="line">    &apos;$route&apos;: &apos;fetchData&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    fetchData () &#123;</span><br><span class="line">      this.error = this.post = null</span><br><span class="line">      this.loading = true</span><br><span class="line">      // replace getPost with your data fetching util / API wrapper</span><br><span class="line">      getPost(this.$route.params.id, (err, post) =&gt; &#123;</span><br><span class="line">        this.loading = false</span><br><span class="line">        if (err) &#123;</span><br><span class="line">          this.error = err.toString()</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          this.post = post</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="导航完成前获取数据"><a href="#导航完成前获取数据" class="headerlink" title="导航完成前获取数据"></a>导航完成前获取数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      post: null,</span><br><span class="line">      error: null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteEnter (to, from, next) &#123;</span><br><span class="line">    getPost(to.params.id, (err, post) =&gt; &#123;</span><br><span class="line">      next(vm =&gt; vm.setData(err, post))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  // 路由改变前，组件就已经渲染完了</span><br><span class="line">  // 逻辑稍稍不同</span><br><span class="line">  beforeRouteUpdate (to, from, next) &#123;</span><br><span class="line">    this.post = null</span><br><span class="line">    getPost(to.params.id, (err, post) =&gt; &#123;</span><br><span class="line">      this.setData(err, post)</span><br><span class="line">      next()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    setData (err, post) &#123;</span><br><span class="line">      if (err) &#123;</span><br><span class="line">        this.error = err.toString()</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        this.post = post</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h2><p>通过 vue 异步组件 结合 webpack 代码分割实现</p>
<h3 id="异步组件"><a href="#异步组件" class="headerlink" title="异步组件"></a>异步组件</h3><p>异步组件被定义为返回一个 promise 工厂函数，该函数返回的 promise 是 resolve 本身</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Foo = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Promise</span>.resolve(&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 定义组件本身</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="webpack-代码分割"><a href="#webpack-代码分割" class="headerlink" title="webpack 代码分割"></a>webpack 代码分割</h3><p><strong>webpack 2 使用动态 import 语法定义代码分割点</strong><br>es6 定义 import() 为一个在运行时能动态加载 es6 模块的方法，<br>webpack把 import() 作为代码分割点， 将需求模块放到单独的chunk代码块中。import() 返回一个 Promise。 <strong>注意，import() 时必须指向模块的 .default 值，因为它才是 promise 处理后返回的 module 对象</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">'./foo.vue) // 返回 Promise</span></span><br></pre></td></tr></table></figure>
<p>综上，两者结合能定义一个被webpack代码自动分割的异步组件, 其他路由配置不需要改变</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Foo = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./foo.vue'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    route: [&#123;</span><br><span class="line">        path: <span class="string">'/foo'</span>,</span><br><span class="line">        component: Foo</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/vue/" rel="tag"># vue</a>
          
            <a href="/tags/vue-router/" rel="tag"># vue-router</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/12/19/vuex 知识点梳理/" rel="next" title="vuex 知识点梳理">
                <i class="fa fa-chevron-left"></i> vuex 知识点梳理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/12/19/Node.js 爬虫/" rel="prev" title="Node.js 爬虫">
                Node.js 爬虫 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars0.githubusercontent.com/u/8380737?s=460&v=4"
                alt="jhgrrewq" />
            
              <p class="site-author-name" itemprop="name">jhgrrewq</p>
              <p class="site-description motion-element" itemprop="description">爱好电影，更爱女神阿佳妮；爱网球，更爱罗杰费德勒。网易云音乐深度用户</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">96</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">68</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/jhgrrewq" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本用法"><span class="nav-number">1.</span> <span class="nav-text">基本用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#动态路由匹配"><span class="nav-number">2.</span> <span class="nav-text">动态路由匹配</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#响应路由参数"><span class="nav-number">2.1.</span> <span class="nav-text">响应路由参数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#嵌套路由"><span class="nav-number">3.</span> <span class="nav-text">嵌套路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编程式导航"><span class="nav-number">4.</span> <span class="nav-text">编程式导航</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命名路由"><span class="nav-number">5.</span> <span class="nav-text">命名路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命名视图"><span class="nav-number">6.</span> <span class="nav-text">命名视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重定向和别名"><span class="nav-number">7.</span> <span class="nav-text">重定向和别名</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#重定向"><span class="nav-number">7.1.</span> <span class="nav-text">重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#别名"><span class="nav-number">7.2.</span> <span class="nav-text">别名</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#html5-history-模式"><span class="nav-number">8.</span> <span class="nav-text">html5 history 模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#导航守卫-（导航-表示路由正在改变）"><span class="nav-number">9.</span> <span class="nav-text">导航守卫 （导航 表示路由正在改变）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#全局守卫"><span class="nav-number">9.1.</span> <span class="nav-text">全局守卫</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由独享守卫"><span class="nav-number">9.2.</span> <span class="nav-text">路由独享守卫</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件内守卫"><span class="nav-number">9.3.</span> <span class="nav-text">组件内守卫</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#完整的导航解析流程"><span class="nav-number">9.4.</span> <span class="nav-text">完整的导航解析流程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#路由元信息"><span class="nav-number">10.</span> <span class="nav-text">路由元信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过渡动效"><span class="nav-number">11.</span> <span class="nav-text">过渡动效</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#所有路由过渡"><span class="nav-number">11.1.</span> <span class="nav-text">所有路由过渡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#单个路由的过渡"><span class="nav-number">11.2.</span> <span class="nav-text">单个路由的过渡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基于路由的动态过渡"><span class="nav-number">11.3.</span> <span class="nav-text">基于路由的动态过渡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据获取"><span class="nav-number">12.</span> <span class="nav-text">数据获取</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#导航完成后获取数据"><span class="nav-number">12.1.</span> <span class="nav-text">导航完成后获取数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#导航完成前获取数据"><span class="nav-number">12.2.</span> <span class="nav-text">导航完成前获取数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#路由懒加载"><span class="nav-number">13.</span> <span class="nav-text">路由懒加载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#异步组件"><span class="nav-number">13.1.</span> <span class="nav-text">异步组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#webpack-代码分割"><span class="nav-number">13.2.</span> <span class="nav-text">webpack 代码分割</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jhgrrewq</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  

  

  
  

  

  

  


</body>
</html>
